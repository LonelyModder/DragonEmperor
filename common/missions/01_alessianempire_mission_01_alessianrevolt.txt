alessianempire_01_alessianrevolt = { # Alessian Revolt
	icon = alessianempire_01
	header = alessianempire_01 #mission_image_phrygia
	
	repeatable = no

    chance = {
		factor = 10
	}
	
	ai_chance = { factor = 10 }

	potential = { 
		NOT = { has_variable = alessianempire_01_alessianrevolt }
		primary_culture = nednibenese
		is_monarchy = yes
		is_subject = no
		has_civil_war = no
		NOT = { has_global_variable = alessianrevolt_fail }
	}
	
	abort = {	
		OR = {
			is_monarchy = no
			NOT = { primary_culture = macedonian }
			custom_tooltip = {
				text = alessianempire_01_alessianrevolt_abort_tt
				has_global_variable = alessianrevolt_fail
			}
			ai_mission_back_out_trigger = yes
		}
	}
	
	on_start = {
    	start_mission_ai_effect = yes
    	save_scope_as = me_alessianrevolt_scope
    	show_as_tooltip = {
    		add_country_modifier = {
	            name = revolt_starts
	            duration = 3650 # 10 years
	        }
    	}
    	#trigger_event = { id = me_antigonid_1_vision.1 }
    }
	
	on_abort = {
    	custom_tooltip = ant_1_mission_cooldown_tt
    	if = {
	    	limit = { has_country_modifier = revolt_starts }
    		remove_country_modifier = revolt_starts
	    }
		set_variable = {
			name = alessianempire_01_alessianrevolt
			days = 7300
		}
    }
	
	on_completion = {
    	show_as_tooltip = {
    		add_country_modifier = {
    			name = revolt_victory
    			duration = 7300 # 20 years
    		}
    	}
    	complete_mission_effect = yes #
    	#trigger_event = { id = me_antigonid_1_vision.2 }
    }
	
	alessianempire_01_alessianrevolt_1 = { # In the Hour of Need
		icon = task_conquest
		duration = 730
		#monthly_on_action = antigonid_01_vision_1_on_action

		allow = {
			#owns = 1288
			treasury >= 200
		}

		highlight = {
			#scope:province = { province_id = 1288 }
		}

		on_start = {
			#trigger_event = { id = me_antigonid_1_vision.11 }
			set_variable = {
				name = alessianempire_01_alessianrevolt_1_start
				days = 730
			}
			show_as_tooltip = { add_treasury = -200 }
		}

		on_completion = {
			#trigger_event = { id = me_antigonid_1_vision.12 }
			#show_as_tooltip = {
			#	current_ruler = {
			#		add_popularity = popularity_medium
			#		if = {
			#			limit = { number_of_traits <= 5 }
			#			add_trait = founder
			#		}
				}
				#p:1288 = {
				#	add_province_modifier = {
				#		name = ant_01_1_pmod
				#		duration = -1
				#	}
				#}
			#}
		}

		bypass = {
			OR = {
				has_variable = alessianempire_01_alessianrevolt_1_bypass
				#has_variable = seleukid_deal_flag
				AND = {
					has_variable = antigonid_01_vision_1_start
					NOT = {	owns = 1288 }
				}
			}
		}

		on_bypass = {
			if = {
				limit = { has_variable = alessianempire_01_alessianrevolt_1_bypass }
				remove_variable = alessianempire_01_alessianrevolt_1_bypass
			}
			if = {
				limit = {
					has_variable = alessianempire_01_alessianrevolt_1_start
					NOT = {	owns = 1288 }
				}
				remove_variable = alessianempire_01_alessianrevolt_1_start
				#trigger_event = { id = me_antigonid_1_vision.14 }
			}
		}
	}
	
}
	