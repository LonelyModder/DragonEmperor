alessianempire_01_alessianrevolt = { # Alessian Revolt
	icon = alessianempire_01
	header = mission_image_rome #mission_image_phrygia
	
	repeatable = no

    chance = {
		factor = 10
	}
	
	ai_chance = { factor = 10 }

	potential = { 
		NOT = { has_variable = alessianempire_01_alessianrevolt }
		primary_culture = nednibenese
		region:modded_sjerall_region = {
            any_region_province = {
                owned_or_subject_owned = root
            }
        }
		tag=KBS
		is_monarchy = yes
		is_subject = no
		has_civil_war = no
		NOT = { has_global_variable = alessianrevolt_fail }
	}
	
	abort = {	
		OR = {
			is_monarchy = no
			NOT = { primary_culture = macedonian }
			custom_tooltip = {
				text = alessianempire_01_alessianrevolt_abort_tt
				has_global_variable = alessianrevolt_fail
			}
			ai_mission_back_out_trigger = yes
		}
	}
	
	on_start = {
    	start_mission_ai_effect = yes
    	save_scope_as = me_alessianrevolt_scope
		add_country_modifier = {
	        name = revolt_starts
	        duration = 3650 # 10 years
	    }
    }
	
	on_abort = {
    	custom_tooltip = ant_1_mission_cooldown_tt
    	if = {
	    	limit = { has_country_modifier = revolt_starts }
    		remove_country_modifier = revolt_starts
	    }
		set_variable = {
			name = alessianempire_01_alessianrevolt
			days = 7300
		}
    }
	
	on_completion = {
		add_country_modifier = {
    		name = revolt_victory
    		duration = 7300 # 20 years
    	}
    	complete_mission_effect = yes #
    	#trigger_event = { id = me_antigonid_1_vision.2 }
    }
	
	alessianempire_01_alessianrevolt_1 = { # In the Hour of Need
		icon = task_conquest
		duration = 30

		allow = {
			treasury >= 100
		}

		highlight = {
			
		}

		on_start = {
			trigger_event = { id = alessian_revolt_mission_1.1 }
			set_variable = {
				name = ongoing_mission_pulse_flag
				days = 365
			}
			show_as_tooltip = { add_treasury = -100 }
		}

		on_completion = {
			trigger_event = { id = alessian_revolt_mission_1.2 }
		}
	}
	
	alessianempire_01_alessianrevolt_2 = { # Aid from the North
		#requires = { alessianempire_01_alessianrevolt_1 }
		icon = task_conquest
		duration = 30
		
		allow = {
			
		}
		
		on_start = {
			trigger_event = { id = alessian_revolt_mission_1.6 }
		}
		
		on_completion = {
			trigger_event = { id = alessian_revolt_mission_1.7 }
		}
		
		bypass = {
			NOT = {exists = c:SAG}
		}
	}
	
	alessianempire_01_alessianrevolt_3 = { # New Battle Tactics
		requires = {  }
		icon = task_conquest
		duration = 90
		
		allow = {
			treasury >= 100
			NOT = {
				any_army = {
					has_legion_trigger = yes
					legion = ROOT.capital_scope.governorship.legion
				}
			}
			num_of_provinces >= 30
		}
		
		on_start = {
			trigger_event = { id = alessian_revolt_mission_1.4 }
		}
		
		on_completion = {
			trigger_event = { id = alessian_revolt_mission_1.5 }
		}
	}
	
	alessianempire_01_alessianrevolt_4 = { # Rising in Revolt
		requires = {  }
		icon = task_conquest
		#duration = 90
		
		allow = {
			OR = {
				owns = 1288
				owns = 1291
				owns = 1288
				owns = 1306
				owns = 1068
				owns = 1316
			}
		}
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 1288
					province_id = 1291
					province_id = 1288
					province_id = 1306
					province_id = 1068
					province_id = 1316
				}
			}
		}
		
		on_start = {
			
		}
		
		on_completion = {
			trigger_event = { id = alessian_revolt_mission_1.8 }
		}
	}
	
}

alessianempire_01_alessianrevolt_5 = { # Dread Castellan
		requires = {  }
		icon = task_conquest
		duration = 5
		
		allow = {
			random_owned_province = { # Neighbouring Umaril
				limit = {
					any_neighbor_province = {
						owner = c:CAA
					}
				}
			}
		}
		
		highlight = {
			scope:province = {
				OR = {
					province_id = 1071
				}
			}
		}
		
		on_start = {
			trigger_event = { id = alessian_revolt_mission_1.11 }
		}
		
		on_completion = {
			trigger_event = { id = alessian_revolt_mission_1.9 }
		}
	}
	
}

alessianempire_01_alessianrevolt_6 = { # First Capital
		requires = {  }
		icon = task_conquest
		
		allow = {
			owns = 1288
		}
		
		highlight = {
			scope:province = {
				OR = {
					province_id = owns = 1288
				}
			}
		}
		
		on_start = {
			
		}
		
		on_completion = {
			trigger_event = { id = alessian_revolt_mission_1.12 }
		}
	}
	
}

alessianempire_01_alessianrevolt_7 = { # Nords in Bruma
		requires = {  }
		icon = task_conquest
		duration = 30
		
		allow = {
			owns = 1326
		}
		
		highlight = {
			scope:province = {
				OR = {
					province_id = owns = 1326
				}
			}
		}
		
		on_start = {
			trigger_event = { id = alessian_revolt_mission_1.13}
		}
		
		on_completion = {
			trigger_event = { id = alessian_revolt_mission_1.14}
		}
	}
	
}
	