namespace = ragada

ragada.1 = {
	type = country_event
	title = "ragada.1.t"
	desc = "ragada.1.desc"
	fire_only_once = yes
	picture = ragada_ships
	
	left_portrait = root.current_ruler
	
	trigger = {
		NOT = { has_global_variable = ragada_invasion_1 }
		tag = RAA
		owns = 7142
		owns_or_subject_owns = 7110
		owns_or_subject_owns = 7164
		owns_or_subject_owns = 7193
		owns_or_subject_owns = 7222
		owns_or_subject_owns = 7242
		owns_or_subject_owns = 7275
		owns_or_subject_owns = 7099
		owns_or_subject_owns = 7201
	}
	
	immediate = {
		set_global_variable = {
			name = ragada_invasion_1
		}
	}
	
	option = { 
		name = "ragada.1.a"
		p:2322 = {
			while = {
                count = 3
                define_pop = {
                type = nobles
                culture = yokudan #forebear <-Need to change the culture and make crowns and forebears division
                religion = yokudan_pantheon
                }
            }
			while = {
                count = 10
                define_pop = {
                type = citizen
                culture = yokudan #forebear <-Need to change the culture and make crowns and forebears division
                religion = yokudan_pantheon
                }
            }
            while = {
                count = 40
                define_pop = {
                type = freemen
                culture = yokudan #forebear <-Need to change the culture and make crowns and forebears division
                religion = yokudan_pantheon
                }
            } 
			while = {
                count = 10
                define_pop = {
                type = slaves
                culture = yokudan #forebear <-Need to change the culture and make crowns and forebears division
                religion = yokudan_pantheon
                }
            }
        }
		p:2322 = {
			set_conquered_by = RAA
		}
		change_country_name = "RaGada_name"
		change_country_adjective = "RaGada_adj"
		add_country_modifier = {
			name = lepontic_invasion_modifier
			duration = 14600 # 10 years
		}
		add_treasury = 300
		region:modded_uppercraglorn_region = { formable_region_province_effect = yes }
		region:modded_lowercraglorn_region = { formable_region_province_effect = yes }
		region:modded_weepingdesert_region = { formable_region_province_effect = yes }
		region:modded_easternhewsbay_region = { formable_region_province_effect = yes }
		region:modded_dragontailmountains_region = { formable_region_province_effect = yes }
		region:modded_hewsbane_region = { formable_region_province_effect = yes }
		region:modded_alikr_region = { formable_region_province_effect = yes }
		
		p:2322 = {
			if = {
                limit = {
                    NOT = { has_city_status = yes }
                }
                set_city_status = city
            }
			if = {
                limit = { free_building_slots > 1 }
                add_building_level = fortress_building
				add_building_level = port_building
            }
		}
		
		p:7142 = { #Kingdom of Akos Kasaz
	    	create_country = {
				change_government = despotic_monarchy
				switch_government_type_event_clearup_effect = yes
				if = {
					limit = {
						NOT = {
							primary_culture = yokudan
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = yokudan
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = yokudan_pantheon
				change_country_name = "akoskasaz_name"
				change_country_adjective = "akoskasaz_adj"
			}
		}
		p:7143 = {
			region = {
				every_region_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7142.owner
				}
			}
		}
		p:7222 = { #Kingdom of Yath
	    	create_country = {
				change_government = despotic_monarchy
				switch_government_type_event_clearup_effect = yes
				if = {
					limit = {
						NOT = {
							primary_culture = yokudan
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = yokudan
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = yokudan_pantheon
				change_country_name = "yath_name"
				change_country_adjective = "yath_adj"
			}
		}
		p:7222 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7222.owner
				}
			}
		}
		p:7224 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7222.owner
				}
			}
		}
		p:7214 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7222.owner
				}
			}
		}
		p:7242 = { #Kingdom of Nalonga
	    	create_country = {
				change_government = despotic_monarchy
				switch_government_type_event_clearup_effect = yes
				if = {
					limit = {
						NOT = {
							primary_culture = yokudan
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = yokudan
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = yokudan_pantheon
				change_country_name = "nalonga_name"
				change_country_adjective = "nalonga_adj"
			}
		}
		p:7242 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7242.owner
				}
			}
		}
		p:7255 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7242.owner
				}
			}
		}
		p:7262 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7242.owner
				}
			}
		}
		p:7275 = { #Kingdom of Ravan
	    	create_country = {
				change_government = despotic_monarchy
				switch_government_type_event_clearup_effect = yes
				if = {
					limit = {
						NOT = {
							primary_culture = yokudan
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = yokudan
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = yokudan_pantheon
				change_country_name = "ravan_name"
				change_country_adjective = "ravan_adj"
			}
		}
		p:7275 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7275.owner
				}
			}
		}
		p:7277 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7275.owner
				}
			}
		}
		p:7201 = { #Kingdom of Samara
	    	create_country = {
				change_government = despotic_monarchy
				switch_government_type_event_clearup_effect = yes
				if = {
					limit = {
						NOT = {
							primary_culture = yokudan
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = yokudan
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = yokudan_pantheon
				change_country_name = "samara_name"
				change_country_adjective = "samara_adj"
			}
		}
		p:7201 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7201.owner
				}
			}
		}
		p:7207 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7201.owner
				}
			}
		}
		p:7193 = { #Kingdom of Kanesh
	    	create_country = {
				change_government = despotic_monarchy
				switch_government_type_event_clearup_effect = yes
				if = {
					limit = {
						NOT = {
							primary_culture = yokudan
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = yokudan
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = yokudan_pantheon
				change_country_name = "kanesh_name"
				change_country_adjective = "kanesh_adj"
			}
		}
		p:7193 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7193.owner
				}
			}
		}
		p:7189 = {
			area = {
				every_area_province = {
					limit = { 
						has_owner = yes
						trigger_if = {
							limit = { has_owner = yes }
							owner = {
								tag = RAA
							}
						}
					}
					set_conquered_by = p:7193.owner
				}
			}
		}
		trigger_event = {
			id = ragada.2 
		}
		trigger_event = {
			id = ragada.3
			days = 31 
		}		
		ai_chance = {
            factor = 90
        }
	}
	
	option = { 
		name = "ragada.1.b"
		p:2322 = {
            while = {
                count = 3
                define_pop = {
                type = nobles
                culture = yokudan #forebear <-Need to change the culture and make crowns and forebears division
                religion = yokudan_pantheon
                }
            }
			while = {
                count = 10
                define_pop = {
                type = citizen
                culture = yokudan #forebear <-Need to change the culture and make crowns and forebears division
                religion = yokudan_pantheon
                }
            }
            while = {
                count = 40
                define_pop = {
                type = freemen
                culture = yokudan #forebear <-Need to change the culture and make crowns and forebears division
                religion = yokudan_pantheon
                }
            } 
			while = {
                count = 10
                define_pop = {
                type = slaves
                culture = yokudan #forebear <-Need to change the culture and make crowns and forebears division
                religion = yokudan_pantheon
                }
            }               
        }
		p:2322 = { #Ra-Gada invades without Na-Totambu
	    	create_country = {
				change_government = despotic_monarchy
				switch_government_type_event_clearup_effect = yes
				if = {
					limit = {
						NOT = {
							primary_culture = yokudan
						}
					}
					set_primary_culture_cleanup_effect = {
						NEW_PRIMARY_CULTURE = yokudan
						MAKE_OLD_CULTURE_INTEGRATED = yes
					}
				}
				set_country_religion = yokudan_pantheon
				change_country_name = "RaGada_name"
				change_country_adjective = "RaGada_adj"
				change_country_flag = RAA
				change_country_color =  "HKHemmerfell_color"
			}
		}
		p:2322.owner = {
			add_country_modifier = {
				name = lepontic_invasion_modifier
				duration = 14600 # 10 years
			}
			add_treasury = 300
			region:modded_uppercraglorn_region = { formable_region_province_effect = yes }
			region:modded_lowercraglorn_region = { formable_region_province_effect = yes }
			region:modded_weepingdesert_region = { formable_region_province_effect = yes }
			region:modded_easternhewsbay_region = { formable_region_province_effect = yes }
			region:modded_dragontailmountains_region = { formable_region_province_effect = yes }
			region:modded_hewsbane_region = { formable_region_province_effect = yes }
			region:modded_alikr_region = { formable_region_province_effect = yes }
		}
		p:2322 = {
			if = {
                limit = {
                    NOT = { has_city_status = yes }
                }
                set_city_status = city
            }
			if = {
                limit = { free_building_slots > 1 }
                add_building_level = fortress_building
				add_building_level = port_building
            }
		}
		trigger_event = {
			id = ragada.2 
		}
		trigger_event = {
			id = ragada.3
			days = 31			
		}
		ai_chance = {
            factor = 10
        }
	}
}

ragada.2 = {
	type = country_event
	title = "ragada.2.t"
	desc = "ragada.2.desc"
	fire_only_once = yes
	picture = ragada_ships
	
	trigger = {
		NOT = { tag = RAA }
	}
	
	option = { 
		name = "ragada.2.a"
	}
}

ragada.3 = {
	type = country_event
	title = "ragada.3.t"
	desc = "ragada.3.desc"
	fire_only_once = yes
	picture = ragada_ships
	
	trigger = {
		owns = 2322 
		war = no
		p:2322.owner = { religion = yokudan_pantheon }
		p:2323.owner = { NOT = { religion = yokudan_pantheon } }
	}
	
	option = { 
		name = "ragada.3.a" 
		p:2322.owner = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:2323
				target = p:2323.owner
			}
		}
	}
}
